---
import Layout from "../layouts/Layout.astro";
import { ArrowRight, Code, Sparkles } from "lucide-react";
import { getCollection } from "astro:content";
import HomeArticleFeed from "../components/HomeArticleFeed";
import SocialSidebar from "../components/SocialSidebar.astro";

// Fetch latest 5 articles
const allArticles = await getCollection("articles");
const latestArticles = allArticles
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
    .slice(0, 5);

const profileImage =
    "https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Cyberpunk%20developer%20avatar%2C%20neon%20lights%2C%20dark%20background%2C%20vector%20art&image_size=square";
---

<Layout title="Home | Creative Developer">
    <!-- Hero Section -->
    <section
        class="relative min-h-[60vh] flex items-center justify-center overflow-visible pt-20 pb-20"
    >
        <!-- Abstract Background Elements -->
        <div
            class="absolute top-1/4 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-[100px] animate-pulse pointer-events-none"
        >
        </div>
        <div
            class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-secondary/20 rounded-full blur-[100px] animate-pulse pointer-events-none"
            style="animation-delay: 2s"
        >
        </div>

        <div class="container mx-auto px-4 relative z-10 text-center">
            <div class="hero-content opacity-0 translate-y-10">
                <div
                    class="inline-block mb-4 px-4 py-1 rounded-full border border-white/10 bg-white/5 backdrop-blur-sm"
                >
                    <span
                        class="text-sm font-medium bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent"
                    >
                        Available for freelance
                    </span>
                </div>

                <h1
                    class="text-6xl md:text-8xl lg:text-9xl font-black mb-8 tracking-tighter leading-none font-heading"
                >
                    CREATIVE<br />
                    <span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-primary via-secondary to-primary bg-[length:200%_auto] animate-gradient"
                    >
                        DEVELOPER
                    </span>
                </h1>

                <p
                    class="text-xl md:text-2xl text-gray-400 mb-8 max-w-2xl mx-auto font-light"
                >
                    Crafting immersive digital experiences with code and
                    creativity.
                </p>
            </div>
        </div>

        <!-- Floating Elements -->
        <div
            class="absolute top-1/3 left-10 hidden lg:block animate-float opacity-50"
        >
            <Code className="w-16 h-16 text-primary" />
        </div>
        <div
            class="absolute bottom-1/3 right-10 hidden lg:block animate-float opacity-50"
            style="animation-delay: 1.5s"
        >
            <Sparkles className="w-16 h-16 text-secondary" />
        </div>
    </section>

    <!-- Main Content Layout -->
    <section class="py-12 relative z-10">
        <div class="container mx-auto px-4">
            <div class="grid lg:grid-cols-12 gap-12">
                <!-- Left Column: Article Feed (8 cols) -->
                <div class="lg:col-span-8">
                    <HomeArticleFeed client:visible articles={latestArticles} />
                </div>

                <!-- Right Column: Sidebar (4 cols) -->
                <div class="lg:col-span-4">
                    <SocialSidebar />
                </div>
            </div>
        </div>
    </section>

    <script>
        import { gsap } from "gsap";

        // Hero Animation
        gsap.to(".hero-content", {
            opacity: 1,
            y: 0,
            duration: 1.5,
            ease: "power3.out",
            delay: 0.2,
        });
    </script>

    <style>
        .animate-gradient {
            background-size: 200% auto;
            animation: gradient 4s linear infinite;
        }

        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
    </style>
</Layout>
